# Implementation Plan: Notifications & Multi-Currency

I will implement two major features: an email notification system for budget alerts and multi-currency support for transactions.

## 1. Multi-Currency Support ðŸ’±
This is the foundational change as it affects the data structure.

*   **Database Schema ([db.js](file:///Users/akshatrastogi/Desktop/expense-tracker/backend/db.js))**:
    *   Update `transactionSchema` to include a `currency` field (default: 'INR').
    *   Update `registerSchema` (User) to store a `preferredCurrency` (default: 'INR').
*   **Backend Logic ([index.js](file:///Users/akshatrastogi/Desktop/expense-tracker/backend/index.js))**:
    *   Update `POST /transaction` to accept and save currency.
    *   Update `/dashboard` to either convert currencies (complex) or simply display the user's preferred currency symbol (simple approach for now: store value, display symbol). *Decision: We will store the currency code with the transaction and update the frontend to display it.*
*   **Frontend UI**:
    *   **Add Transaction**: Add a currency selector dropdown (USD, EUR, INR, GBP, etc.).
    *   **Dashboard**: Update displays to show the correct currency symbol for each transaction.
    *   **Onboarding/Profile**: Allow setting a default currency.

## 2. Notification System (Budget Overrun) ðŸ“§
I will use **Nodemailer** with a Gmail account (or Ethereal for testing) as it's free and easier to set up without a verified domain than SendGrid for development.

*   **Dependencies**: Install `nodemailer`.
*   **Backend Logic**:
    *   Create a `sendEmail` utility function.
    *   In `POST /transaction`:
        1.  After saving an *expense*, check the total spent in that category for the current month.
        2.  Fetch the user's `Budget` for that category.
        3.  If `total_spent > budget_amount`, trigger the `sendEmail` function to the user's email.
*   **Environment Variables**:
    *   Add `EMAIL_USER` and `EMAIL_PASS` to `.env`.

## Execution Order
1.  **Multi-Currency**: Update DB -> Update Backend -> Update Frontend.
2.  **Notifications**: Setup Nodemailer -> Implement Budget Check Logic -> Integrate Email Sending.

Shall I proceed with this plan?